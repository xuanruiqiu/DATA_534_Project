---
title: "Day 5 Notebook - YaojunLiu"
author: "YaojunLiu"
date: "2026-01-29"
output: html_document
---

## Today's Tasks

- [x] Write README.md with installation and usage instructions
- [x] Set up GitHub Actions CI workflow
- [x] Add `gld_set_api_key()` helper function
- [x] Final code review and bug fixes
- [x] Update NAMESPACE with all exports

## Work Summary

### Completed Work

Today I focused on documentation and CI/CD setup. I wrote a comprehensive README and configured GitHub Actions for automated testing. I also added a helper function for setting the API key.

### README.md Created

```markdown
# rGoldETF

Gold ETF Data Analysis and Visualization for R

## Installation

```r
# Install from GitHub
devtools::install_github("your-repo/rGoldETF")
```

## Setup

Get your free API key from [Twelve Data](https://twelvedata.com) (800 calls/day free).

```r
library(rGoldETF)

# Set API key (choose one method)
Sys.setenv(TWELVE_DATA_API_KEY = "your_api_key")
# Or
gld_set_api_key("your_api_key")
```

## Quick Start

### Get Current Price

```r
price <- get_gld_price()
print(price$price)
```

### Get Historical Data

```r
history <- get_gld_history("2024-01-01", "2024-06-30")
```

### Technical Analysis

```r
data <- get_technical_indicators(history, c("sma", "ema", "rsi"))
plot_gld_chart(data, indicators = c("sma", "ema"))
```

### Gold Spot Price

```r
gold <- get_gold_spot_price()
print(paste("Gold:", gold$price, "USD/oz"))
```

### Compare ETFs

```r
comparison <- compare_gold_etfs(c("GLD", "IAU", "SGOL"), "2024-01-01", "2024-06-30")
```

## Available Functions

| Function | Description |
|----------|-------------|
| `get_gld_price()` | Current GLD price |
| `get_gld_history()` | Historical GLD data |
| `get_gold_spot_price()` | Gold spot price (XAU/USD) |
| `get_gold_spot_history()` | Historical gold spot |
| `get_etf_price()` | Any ETF price |
| `get_etf_history()` | Any ETF history |
| `compare_gold_etfs()` | Compare multiple ETFs |
| `search_gold_symbols()` | Search symbols |
| `get_market_state()` | Market open/close |
| `get_technical_indicators()` | Calculate indicators |
| `plot_gld_chart()` | Price charts |

## License

MIT
```

### GitHub Actions Workflow

**.github/workflows/R-CMD-check.yaml:**
```yaml
name: R-CMD-check

on:
  push:
    branches: [main, master]
  pull_request:
    branches: [main, master]

jobs:
  R-CMD-check:
    runs-on: ${{ matrix.config.os }}

    name: ${{ matrix.config.os }} (${{ matrix.config.r }})

    strategy:
      fail-fast: false
      matrix:
        config:
          - {os: macos-latest, r: 'release'}
          - {os: windows-latest, r: 'release'}
          - {os: ubuntu-latest, r: 'release'}

    steps:
      - uses: actions/checkout@v3

      - uses: r-lib/actions/setup-r@v2
        with:
          r-version: ${{ matrix.config.r }}

      - uses: r-lib/actions/setup-r-dependencies@v2
        with:
          extra-packages: any::rcmdcheck
          needs: check

      - uses: r-lib/actions/check-r-package@v2
```

### Added gld_set_api_key() to api.R

```r
#' Set API key
#'
#' @param key Your Twelve Data API key
#' @export
#' @examples
#' \dontrun{
#' gld_set_api_key("your_api_key")
#' }
gld_set_api_key <- function(key) {
  Sys.setenv(TWELVE_DATA_API_KEY = key)
  message("API key set successfully.")
  invisible(key)
}
```

### Updated NAMESPACE

```r
# Generated by roxygen2: do not edit by hand

export(compare_gold_etfs)
export(get_etf_history)
export(get_etf_price)
export(get_gld_history)
export(get_gld_price)
export(get_gold_spot_history)
export(get_gold_spot_price)
export(get_market_state)
export(get_technical_indicators)
export(gld_set_api_key)
export(plot_gld_chart)
export(plot_iv_surface)
export(search_gold_symbols)
```

### Final Testing

Ran full test suite with RuochenYang:

```r
devtools::test()
# ✓ | F W S  OK | Context
# ✓ |         8 | test-day1-api
# ✓ |        12 | test-day2-price
# ✓ |        15 | test-day3-technical
# ✓ |        14 | test-day4-options-viz
# ✓ |        18 | test-day5-integration
# ✓ |         8 | test-day6-gold
#
# ══ Results ═══════════════════════════════════════
# Duration: 2.3 s
# OK:       75
# Failed:   0
# Warnings: 0
# Skipped:  0
```

### Issues Encountered

1. **CI environment variables**: GitHub Actions needs secrets for API key. Added note to skip API tests in CI without key.

2. **NAMESPACE ordering**: roxygen2 sorts exports alphabetically, which is fine.

### Decision Log

1. **CI platforms**: Test on macOS, Windows, and Ubuntu for cross-platform compatibility
2. **README format**: Kept simple with quick start examples
3. **API key helper**: Added `gld_set_api_key()` for user convenience

## Project Summary

### My Contributions

| Day | Work Completed |
|-----|----------------|
| Day 1 | API research, api.R structure |
| Day 2 | `.api_request()`, `get_gld_history()` |
| Day 3 | RSI, MACD, Bollinger Bands |
| Day 4 | gold.R extended functions |
| Day 5 | README, CI, final integration |

### Team Collaboration

- **XuanruiQiu**: Package structure, price functions, visualization, vignette
- **YaojunLiu (me)**: API core, history function, indicators, extended functions, README/CI
- **RuochenYang**: Test framework, all test files, integration testing

### Final Function Count

- **9 API functions** (calling Twelve Data)
- **1 local calculation function** (technical indicators)
- **2 visualization functions** (charts)
- **1 helper function** (set API key)

Total: **13 exported functions**
